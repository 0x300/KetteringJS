/*
 	This file is part of KetteringJS.

	KetteringJS is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    KetteringJS is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with KetteringJS.  If not, see <http://www.gnu.org/licenses/>.
*/
var KU={}
!function(t){function e(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="NOPQRSTUVWXYZABCDEFGHIJKLMnopqrstuvwxyzabcdefghijklm0123456789",r=[],i="",o=0;o<=e.length;o++)r[e.substr(o,1)]=n.substr(o,1)
for(var o=0;o<=t.length;o++){var s=t.charAt(o)
i+=s in r?r[s]:s}return i}function n(t,e){Object.defineProperty(this,"name",{get:function(){return t},set:function(){}}),Object.defineProperty(this,"valueId",{get:function(){return e},set:function(){}})}function r(t,e,n){return Object.defineProperty(this,"fullName",{get:function(){return t},set:function(){}}),Object.defineProperty(this,"info",{get:function(){return e},set:function(){}}),Object.defineProperty(this,"imgUrl",{get:function(){return n},set:function(){}}),this}var i={},o=null,s=null
i.abort=function(){null!=s&&(s.abort(),s=null)},i.search=function(t,n,i,u,c,a,f){if(void 0==f)var f=0
if(null!=s)return void a("One search is already occurring. Please cancel first.")
o={page:f,firstName:t,lastName:n,ext:i,departmentId:u}
var l="http://www.kettering.edu/faculty-staff/directory?field_faculty_staff_first_value="+encodeURIComponent(t)+"&field_faculty_staff_last_value="+encodeURIComponent(n)+"&field_phone_extension_value="+i+"&tid="+u+"&page=0"+f
s=$.ajax({url:l,type:"GET",dataType:"html",success:function(t){var n=[],i=$("<div>").html(t).find(".directory-caption")
i.each(function(t){if($("img",this).length>0)var i=$("img",this).eq(0).attr("src")
else var i="images/default_directory_icon.jpg"
"/"==i[0]&&(i="http://www.kettering.edu"+i)
var o=$("h3",this).first().text(),s=[]
$(".inside span",this).each(function(t){var n=$(this).clone().children().remove().end().text()
$(this).hasClass("obfuscated")&&(n=n.split("").reverse().join(""),n=e(n)),""==n.replace(/\s+/g,"")||$(this).find(".tel").length>0||(s[t]=n)}),n[t]=new r(o,s,i)}),s=null,c(n)},error:function(t,e,n){s=null,"abort"!=e&&a(n)}})},i.nextPage=function(t,e){return null==o?void e("Please search before you attempt to get Next Page"):void i.search(o.firstName,o.lastName,o.ext,o.departmentId,t,e,o.page+1)},i.previousPage=function(t,e){return null==o?void e("Please search before you attempt to get Previous Page"):o.page-1<0?void t([]):void i.search(o.firstName,o.lastName,o.ext,o.departmentId,t,e,o.page-1)},i.getDepartments=function(t,e){var r="http://www.kettering.edu/faculty-staff/directory?field_faculty_staff_first_value=&field_faculty_staff_last_value=&field_phone_extension_value=KUMOBILE&tid=All"
$.ajax({url:r,type:"GET",dataType:"html",success:function(e){var r=[],i=$("<div>").html(e).find("#edit-tid option")
i.each(function(t){var e=$(this).attr("value"),i=$(this).text()
r[t]=new n(i,e)}),t(r)},error:function(t){e(t)}})},t.Directory=i}(KU),function(t){function e(t,e){return Object.defineProperty(this,"title",{get:function(){return t},set:function(){}}),Object.defineProperty(this,"mainHtml",{get:function(){return e},set:function(){}}),this}function n(t,e,n,i,o,s,u,c,a){return Object.defineProperty(this,"title",{get:function(){return t},set:function(){}}),Object.defineProperty(this,"location",{get:function(){return e},set:function(){}}),Object.defineProperty(this,"time",{get:function(){return n},set:function(){}}),Object.defineProperty(this,"month",{get:function(){return i},set:function(){}}),Object.defineProperty(this,"dayOfTheMonth",{get:function(){return o},set:function(){}}),Object.defineProperty(this,"dayOfTheWeek",{get:function(){return s},set:function(){}}),Object.defineProperty(this,"tags",{get:function(){return u},set:function(){}}),Object.defineProperty(this,"imgUrl",{get:function(){return c},set:function(){}}),Object.defineProperty(this,"detailsUrl",{get:function(){return a},set:function(){}}),this.getEvent=function(t,e){r.downloadEventDetails(a,t,e)},this}var r={},i=null
r.downloadEventDetails=function(t,n,r){var t="http://www.kettering.edu/"+t
$.ajax({url:t,type:"GET",dataType:"html",success:function(t){var r=$("<div>").html(t),i=r.find(".content.clearfix"),o=r.find(".title.inside").text(),s=new e(o,i)
n(s)},error:function(t,e,n){r(n)}})},r.retrieve=function(t,e,r){var o
o=0!=t?"http://www.kettering.edu/events?page="+t:"http://www.kettering.edu/events",i=t,$.ajax({url:o,type:"GET",dataType:"html",success:function(t){var r,i,o,s=[]
$("<div>").html(t).find(".views-row").each(function(t){if($("img",this).length>0)var e=$("img",this).eq(0).attr("src")
else var e=""
"/"==e[0]&&(e="http://www.kettering.edu"+e)
var u=$("h3",this).text(),c=$(".info .location",this).text(),a=$(".tags",this).text(),f=$("h3 a",this).attr("href")
if(2==$(".info .date-display-single",this).length)var l=$(".info .date-display-single",this).eq(0).text()+" - "+$(".info .date-display-single",this).eq(1).text()
else var l=$(".info .date-display-single",this).eq(0).text()
$(this).hasClass("views-row-1")&&(r=$(".datebox",this).find(".month").text(),o=$(".datebox",this).find(".lower .dow").text(),i=$(".datebox",this).find(".day").text(),r=r.replace("Jan","January"),r=r.replace("Feb","February"),r=r.replace("Mar","March"),r=r.replace("Apr","April"),r=r.replace("Jun","June"),r=r.replace("Jul","July"),r=r.replace("Aug","August"),r=r.replace("Sep","September"),r=r.replace("Oct","October"),r=r.replace("Nov","Novemeber"),r=r.replace("Dec","December")),s[t]=new n(u,c,l,r,i,o,a,e,f)}),e(s)},error:function(t,e,n){r(n)}})},r.nextPage=function(t,e){null==i?i=0:i++,r.retrieve(i,t,e)},r.previousPage=function(t,e){null==i?i=0:0>i-1?i=0:i--,r.retrieve(i,t,e)},t.Events=r}(KU),function(t){function e(t,e,n,r,i){Object.defineProperty(this,"title",{get:function(){return t},set:function(){}}),Object.defineProperty(this,"author",{get:function(){return e},set:function(){}}),Object.defineProperty(this,"callNumber",{get:function(){return n},set:function(){}}),Object.defineProperty(this,"holdings",{get:function(){return r},set:function(){}}),Object.defineProperty(this,"imgUrl",{get:function(){return i},set:function(){}})}var n={},r=null,i=null,o=[{valueId:"GENERAL^SUBJECT^GENERAL^^words or phrase",name:"Words or Phrase"},{valueId:"AU^AUTHOR^AUTHORS^Author Processing^author",name:"Author"},{valueId:"TI^TITLE^SERIES^Title Processing^title",name:"Title"},{valueId:"SU^SUBJECT^SUBJECTS^^subject",name:"Subject"},{valueId:"SER^SERIES^SERIES^Title Processing^series",name:"Series"},{valueId:"PER^PERTITLE^SERIES^Title Processing^periodical title",name:"Periodical"}]
n.search=function(t,n,o,s,u){if(void 0!=u)var c="http://catalog.palnet.info"+u.action+"?firsthit=&lasthit=&form_type=JUMP%5E"+(20*u.page+1),a=u.page
else var c="http://elibrary.palnet.info/uhtbin/cgisirsi/x/0/0/57/5?library=KU&location=KUMAIN&match_on=KEYWORD&shadow=NO&user_id=kuweb&srchfield1="+encodeURIComponent(n)+"&searchdata1="+encodeURIComponent(t),a=0
i=$.ajax({url:c,type:"GET",dataType:"html",success:function(s){var u=[],c=$("<div>").html(s),f=c.find(".hit_list_row"),l=c.find("#hitlist").first().attr("action")
r={action:l,field:t,searchOptionId:n,page:a},f.each(function(t){if($(".hit_list_list_cover script",this).length>0){var n=$(".hit_list_list_cover script",this).eq(0).text().replace(/\s/g,"").replace("getHitCover('","").replace("');",""),r="",i=n.split("','")
8==i.length&&(r=i[0]+"isbn="+i[2].replace(/,.+/g,"")+"/SC.GIF&client="+i[1]+"&type=xw12&upc=&oclc="+i[4].replace(/,.+/g,""))}else var r=""
var o=$(".title",this).first().text().trim(),s=$(".author",this).first().text().trim(),c=$(".call_number",this).first().text().trim(),a=$(".holdings_statement",this).first().text().trim()
u[t]=new e(o,s,c,a,r)}),i=null,o(u)},error:function(t,e,n){i=null,"abort"!=e&&s(n)}})},n.nextPage=function(t,e){r.page++,n.search(r.field,r.searchOptionId,t,e,r)},n.getSearchOptions=function(){return o},n.abort=function(){null!=i&&(i.abort(),i=null)},t.Library=n}(KU),function(t){function e(t,e,n){return Object.defineProperty(this,"title",{get:function(){return t},set:function(){}}),Object.defineProperty(this,"headerInfo",{get:function(){return e},set:function(){}}),Object.defineProperty(this,"mainHtml",{get:function(){return n},set:function(){}}),this}function n(t,e,n,i,o){return this.getArticle=function(t,e){r.downloadArticle(o,t,e)},Object.defineProperty(this,"title",{get:function(){return t},set:function(){}}),Object.defineProperty(this,"author",{get:function(){return e},set:function(){}}),Object.defineProperty(this,"date",{get:function(){return n},set:function(){}}),Object.defineProperty(this,"imgUrl",{get:function(){return i},set:function(){}}),Object.defineProperty(this,"detailsUrl",{get:function(){return o},set:function(){}}),this}var r={},i=null
r.downloadArticle=function(t,n,r){var i="http://www.kettering.edu/"+t
$.ajax({url:i,type:"GET",dataType:"html",success:function(t){var r=$("<div>").html(t),i=r.find(".field.field-name-body.field-type-text-with-summary.field-label-hidden"),o=r.find(".news").text(),s=r.find(".info").text(),u=new e(o,s,i)
n(u)},error:function(t,e,n){r(n)}})},r.retrieve=function(t,e,r){var o
o=0!=t?"http://www.kettering.edu/news/current-news?page="+t:"http://www.kettering.edu/news/current-news",i=t,$.ajax({url:o,type:"GET",dataType:"html",success:function(t){var r=[]
$("<div>").html(t).find(".news-caption").each(function(t){if($("img",this).length>0)var e=$("img",this).eq(0).attr("src")
else var e=""
"/"==e[0]&&(e="http://www.kettering.edu"+e)
var i=$("h3",this).text(),o=$(".info .by",this).text(),s=$(".info .date",this).text(),u=$(".more",this).attr("href")
r[t]=new n(i,o,s,e,u)}),e(r)},error:function(t,e,n){r(n)}})},r.nextPage=function(t,e){null==i?i=0:i++,r.retrieve(i,t,e)},r.previousPage=function(t,e){null==i?i=0:0>i-1?i=0:i--,r.retrieve(i,t,e)},t.News=r}(KU),function(t){function e(t,e,n,r){Object.defineProperty(this,"name",{get:function(){return t},set:function(){}}),Object.defineProperty(this,"code",{get:function(){return e},set:function(){}}),Object.defineProperty(this,"city",{get:function(){return n},set:function(){}}),Object.defineProperty(this,"state",{get:function(){return r},set:function(){}})}function n(t,e,n,r,i,o){Object.defineProperty(this,"kuTitle",{get:function(){return t},set:function(){}}),Object.defineProperty(this,"kuCourseId",{get:function(){return e},set:function(){}}),Object.defineProperty(this,"transTitle",{get:function(){return r},set:function(){}}),Object.defineProperty(this,"transCourseId",{get:function(){return n},set:function(){}}),Object.defineProperty(this,"credits",{get:function(){return i},set:function(){}}),Object.defineProperty(this,"college",{get:function(){return o},set:function(){}})}var r={},i=null
r.searchByCollege=function(t,r,o){var s="https://okras.kettering.edu/kuapps/apex_apps.transfer_art_pkg.get_json_ces_credits?as_sbgi="+t,u=[]
i=$.ajax({url:s,type:"GET",dataType:"html",success:function(o){var s=JSON.parse(o).entries,c=function(t,e){return t.kucourse<e.kucourse?-1:t.kucourse>e.kucourse?1:t.kucoursetitle<e.kucoursetitle?-1:t.kucoursetitle>e.kucoursetitle?1:0}
s.sort(c)
for(var a=0,f=0;f<s.length;f++){var l,d,h,p,g,v,y,m,b,_,w=s[f]
"Y"==w.transferableflag&&(l=w.kucoursetitle.trim(),d=w.kucourse.trim(),h=w.trnscrse.trim(),p=w.trnscrsetitle.trim(),g=w.credits.trim(),y=w.institution.replace(t,"").trim(),m=t,v=new e(y,m,b,_),u[a++]=new n(l,d,h,p,g,v))}i=null,r(u)},error:function(t,e,n){i=null,"abort"!=e&&o(n)}})},r.searchByCourseId=function(t,r,o,s,u){var c="https://okras.kettering.edu/kuapps/apex_apps.transfer_art_pkg.get_json_transferable_courses?as_state=ALL&as_subject="+encodeURIComponent(t.toUpperCase())+"&as_course="+encodeURIComponent(r),a=[]
i=$.ajax({url:c,type:"GET",dataType:"html",success:function(o){var u=JSON.parse(o).transfercourses,c=function(t,e){return t.course_state<e.course_state?-1:t.course_state>e.course_state?1:t.college<e.college?-1:t.college>e.college?1:t.course_title<e.course_title?-1:t.course_title>e.course_title?1:0}
u.sort(c)
for(var f=0;f<u.length;f++){var l,d,h,p,g,v,y,m,b,_,w=u[f]
d=t.toUpperCase()+"-"+r,h=w.course,p=w.course_title,y=w.college,m=w.college_code,b=w.course_city,_=w.course_state,v=new e(y,m,b,_),a[f]=new n(l,d,h,p,g,v)}i=null,s(a)},error:function(t,e,n){i=null,"abort"!=e&&u(n)}})},r.getColleges=function(t,n){var r="https://okras.kettering.edu/kuapps/apex_apps.transfer_art_pkg.get_json_ces_colleges",i=[]
$.ajax({url:r,type:"GET",dataType:"html",success:function(n){for(var r=JSON.parse(n).entries,o=0;o<r.length;o++){var s=r[o]
i[o]=new e(s.stvsbgi_desc,s.stvsbgi_code)}t(i)},error:function(t){n(t)}})},r.abort=function(){null!=i&&(i.abort(),i=null)},t.Transfer=r}(KU)
